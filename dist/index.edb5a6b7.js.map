{"mappings":"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","sources":["<anon>","src/scripts/main.js","src/modules/Game.class.js"],"sourcesContent":["\"use strict\";\nconst $a5fd07fa01589658$var$IDLE = \"idle\";\nconst $a5fd07fa01589658$var$PLAYING = \"playing\";\nconst $a5fd07fa01589658$export$eb2b832b8b9fda85 = \"win\";\nconst $a5fd07fa01589658$export$43a03cf66b318012 = \"lose\";\nclass $a5fd07fa01589658$export$985739bfa5723e08 {\n    constructor(initialState, winCallback, loseCallback){\n        this.board = initialState || [\n            [\n                0,\n                0,\n                0,\n                0\n            ],\n            [\n                0,\n                0,\n                0,\n                0\n            ],\n            [\n                0,\n                0,\n                0,\n                0\n            ],\n            [\n                0,\n                0,\n                0,\n                0\n            ]\n        ];\n        this.score = 0;\n        this.status = $a5fd07fa01589658$var$IDLE;\n        this.isStarted = false;\n        this.winCallback = winCallback;\n        this.loseCallback = loseCallback;\n    }\n    moveTile(fromCell, toCell) {\n        const fromCellRect = fromCell.getBoundingClientRect();\n        const toCellRect = toCell.getBoundingClientRect();\n        const xOffset = toCellRect.left - fromCellRect.left;\n        const yOffset = toCellRect.top - fromCellRect.top;\n        fromCell.style.setProperty(\"--x-offset\", `${xOffset}px`);\n        fromCell.style.setProperty(\"--y-offset\", `${yOffset}px`);\n        fromCell.classList.add(\"moving\");\n    }\n    updateBoard() {\n        const cells = document.querySelectorAll(\".field-cell\");\n        let cellIndex = 0;\n        for(let row = 0; row < this.board.length; row++)for(let col = 0; col < this.board[row].length; col++){\n            const cell = cells[cellIndex++];\n            const value = this.board[row][col];\n            const previousValue = cell.textContent;\n            cell.classList.remove(`field-cell--${previousValue}`);\n            if (value === 0) cell.textContent = \"\";\n            else {\n                cell.classList.add(`field-cell--${value}`);\n                cell.textContent = value;\n            }\n        }\n    }\n    addRandomTile() {\n        const emptyCells = [];\n        for(let row = 0; row < 4; row++){\n            for(let col = 0; col < 4; col++)if (this.board[row][col] === 0) emptyCells.push({\n                row: row,\n                col: col\n            });\n        }\n        if (emptyCells.length > 0) {\n            const { row: row, col: col } = emptyCells[Math.floor(Math.random() * emptyCells.length)];\n            if (this.score === 0) this.board[row][col] = 2;\n            this.updateBoard();\n        }\n    }\n    addRandomCellAfterMoving() {\n        const emptyCells = [];\n        for(let row = 0; row < 4; row++){\n            for(let col = 0; col < 4; col++)if (this.board[row][col] === 0) emptyCells.push({\n                row: row,\n                col: col\n            });\n        }\n        if (emptyCells.length > 0) {\n            const { row: row, col: col } = emptyCells[Math.floor(Math.random() * emptyCells.length)];\n            this.board[row][col] = Math.random() < 0.9 ? 2 : 4;\n            this.updateBoard();\n        }\n    }\n    createColumn(col) {\n        const newColumn = [];\n        for(let row = 0; row < this.board.length; row++)if (this.board[row][col] !== 0) newColumn.push(this.board[row][col]);\n        return newColumn;\n    }\n    updateColumn(col, newColumn) {\n        let moved = false;\n        for(let row = 0; row < this.board.length; row++)if (this.board[row][col] !== newColumn[row]) {\n            this.board[row][col] = newColumn[row];\n            moved = true;\n        }\n        return moved;\n    }\n    resetGameStart() {\n        this.score = 0;\n        this.status = $a5fd07fa01589658$var$PLAYING;\n        this.board = [\n            [\n                0,\n                0,\n                0,\n                0\n            ],\n            [\n                0,\n                0,\n                0,\n                0\n            ],\n            [\n                0,\n                0,\n                0,\n                0\n            ],\n            [\n                0,\n                0,\n                0,\n                0\n            ]\n        ];\n        this.addRandomTile();\n        this.addRandomTile();\n    }\n    mergeTitles(newRow, canMerge) {\n        const mergedThisMove = [];\n        for(let i = 0; i < newRow.length - 1; i++)if (newRow[i] === newRow[i + 1]) {\n            newRow[i] *= 2;\n            newRow.splice(i + 1, 1);\n            canMerge[i] = false;\n            mergedThisMove.push(i);\n        }\n        return mergedThisMove;\n    }\n    moveLeft() {\n        let moved = false;\n        for(let row = 0; row < this.board.length; row++){\n            const currentRow = this.board[row].filter((val)=>val !== 0);\n            const mergedRow = [];\n            let skip = false;\n            for(let i = 0; i < currentRow.length; i++){\n                if (skip) {\n                    skip = false;\n                    continue;\n                }\n                if (currentRow[i] === currentRow[i + 1]) {\n                    mergedRow.push(currentRow[i] * 2);\n                    this.getScore(true, currentRow[i] * 2);\n                    skip = true;\n                    moved = true;\n                } else mergedRow.push(currentRow[i]);\n            }\n            while(mergedRow.length < this.board[row].length)mergedRow.push(0);\n            if (!moved) {\n                for(let i = 0; i < this.board[row].length; i++)if (this.board[row][i] !== mergedRow[i]) {\n                    moved = true;\n                    break;\n                }\n            }\n            this.board[row] = mergedRow;\n        }\n        if (moved) {\n            this.addRandomCellAfterMoving();\n            this.updateBoard();\n            this.getStatus();\n        }\n        return moved;\n    }\n    moveRight() {\n        let moved = false;\n        for(let row = 0; row < this.board.length; row++){\n            const currentRow = this.board[row].filter((val)=>val !== 0);\n            const mergedRow = [];\n            let skip = false;\n            for(let i = 0; i < currentRow.length; i++){\n                if (skip) {\n                    skip = false;\n                    continue;\n                }\n                if (currentRow[i] === currentRow[i + 1]) {\n                    mergedRow.push(currentRow[i] * 2);\n                    this.getScore(true, currentRow[i] * 2);\n                    skip = true;\n                    moved = true;\n                } else mergedRow.push(currentRow[i]);\n            }\n            while(mergedRow.length < this.board[row].length)mergedRow.unshift(0);\n            for(let i = 0; i < this.board[row].length; i++)if (this.board[row][i] !== mergedRow[i]) {\n                moved = true;\n                break;\n            }\n            this.board[row] = mergedRow;\n        }\n        if (moved) {\n            this.addRandomCellAfterMoving();\n            this.updateBoard();\n            this.getStatus();\n        }\n        return moved;\n    }\n    moveUp() {\n        let moved = false;\n        for(let col = 0; col < this.board.length; col++){\n            const newColumn = this.createColumn(col);\n            const canMerge = new Array(newColumn.length).fill(true);\n            for(let i = 0; i < newColumn.length - 1; i++)if (newColumn[i] === newColumn[i + 1] && canMerge[i] && canMerge[i + 1]) {\n                newColumn[i] *= 2;\n                newColumn.splice(i + 1, 1);\n                moved = true;\n                canMerge[i] = false;\n                this.getScore(moved, newColumn[i]);\n            }\n            while(newColumn.length < this.board.length)newColumn.push(0);\n            moved = this.updateColumn(col, newColumn) || moved;\n        }\n        if (moved) {\n            this.addRandomCellAfterMoving();\n            this.updateBoard();\n            this.getStatus();\n        }\n        return moved;\n    }\n    moveDown() {\n        let moved = false;\n        for(let col = 0; col < this.board.length; col++){\n            const newColumn = this.createColumn(col);\n            const canMerge = new Array(newColumn.length).fill(true);\n            for(let i = newColumn.length - 1; i > 0; i--)if (newColumn[i] === newColumn[i - 1] && canMerge[i] && canMerge[i - 1]) {\n                newColumn[i] *= 2;\n                newColumn.splice(i - 1, 1);\n                moved = true;\n                canMerge[i] = false;\n                this.getScore(moved, newColumn[i]);\n            }\n            while(newColumn.length < this.board.length)newColumn.unshift(0);\n            moved = this.updateColumn(col, newColumn) || moved;\n        }\n        if (moved) {\n            this.addRandomCellAfterMoving();\n            this.updateBoard();\n            this.getStatus();\n        }\n        return moved;\n    }\n    /**\n   * @returns {number[][]}\n   */ getState() {\n        return this.board;\n    }\n    getStatus() {\n        if (this.score === 0) this.status = $a5fd07fa01589658$var$IDLE;\n        else {\n            let hasEmptyCell = false;\n            let has2048Cell = false;\n            let canMove = false;\n            for(let row = 0; row < this.board.length; row++)for(let col = 0; col < this.board[row].length; col++){\n                if (this.board[row][col] === 0) hasEmptyCell = true;\n                if (this.board[row][col] === 2048) has2048Cell = true;\n                if (row < this.board.length - 1 && this.board[row][col] === this.board[row + 1][col]) canMove = true;\n                if (col < this.board[row].length - 1 && this.board[row][col] === this.board[row][col + 1]) canMove = true;\n            }\n            if (has2048Cell) {\n                this.status = $a5fd07fa01589658$export$eb2b832b8b9fda85;\n                this.winCallback();\n            } else if (hasEmptyCell || canMove) this.status = $a5fd07fa01589658$var$PLAYING;\n            else {\n                this.status = $a5fd07fa01589658$export$43a03cf66b318012;\n                this.loseCallback();\n            }\n        }\n        return this.status;\n    }\n    start() {\n        this.resetGameStart();\n    }\n    restart() {\n        this.resetGameStart();\n    }\n}\n\n\n\"use strict\";\nconst $09e991522ca7e64e$var$game = new (0, $a5fd07fa01589658$export$985739bfa5723e08)(null, $09e991522ca7e64e$var$showWinMessage, $09e991522ca7e64e$var$showLoseMessage);\nconst $09e991522ca7e64e$var$startButton = document.querySelector(\".start\");\nconst $09e991522ca7e64e$var$cells = document.querySelectorAll(\".field-cell\");\nconst $09e991522ca7e64e$var$score = document.querySelector(\".game-score\");\nconst $09e991522ca7e64e$var$recordElement = document.querySelector(\".best__score\");\nconst $09e991522ca7e64e$var$messageContainer = document.querySelector(\".message-container\");\nfunction $09e991522ca7e64e$var$showWinMessage() {\n    $09e991522ca7e64e$var$messageContainer.classList.remove(\"hidden\");\n    $09e991522ca7e64e$var$messageContainer.classList.add(\"message-win\");\n    $09e991522ca7e64e$var$messageContainer.textContent = \"You Win!\";\n}\nfunction $09e991522ca7e64e$var$showLoseMessage() {\n    $09e991522ca7e64e$var$messageContainer.classList.remove(\"hidden\");\n    $09e991522ca7e64e$var$messageContainer.classList.add(\"message-lose\");\n    $09e991522ca7e64e$var$messageContainer.textContent = \"You Lose!\";\n}\nfunction $09e991522ca7e64e$var$hideMessage() {\n    $09e991522ca7e64e$var$messageContainer.classList.add(\"hidden\");\n}\nfunction $09e991522ca7e64e$var$updateScore(value) {\n    $09e991522ca7e64e$var$score.textContent = value;\n}\nfunction $09e991522ca7e64e$var$saveScore(sscore) {\n    const currentRecord = localStorage.getItem(\"highScore\");\n    if (!currentRecord || sscore > currentRecord) {\n        localStorage.setItem(\"highScore\", sscore);\n        $09e991522ca7e64e$var$displayRecord();\n    }\n}\nfunction $09e991522ca7e64e$var$displayRecord() {\n    const highScore = localStorage.getItem(\"highScore\") || 0;\n    $09e991522ca7e64e$var$recordElement.textContent = highScore;\n}\n$09e991522ca7e64e$var$displayRecord();\n$09e991522ca7e64e$var$game.getScore = function(moved, value) {\n    if (moved && value > 0) {\n        this.score += value;\n        $09e991522ca7e64e$var$updateScore(this.score);\n        $09e991522ca7e64e$var$saveScore(this.score);\n    }\n};\n$09e991522ca7e64e$var$startButton.addEventListener(\"click\", ()=>{\n    $09e991522ca7e64e$var$startButton.textContent = \"Restart\";\n    $09e991522ca7e64e$var$startButton.classList.remove(\"start\");\n    $09e991522ca7e64e$var$startButton.classList.add(\"restart\");\n    $09e991522ca7e64e$var$score.textContent = \"0\";\n    $09e991522ca7e64e$var$cells.forEach((cell)=>{\n        cell.classList.remove(\"hidden\");\n    });\n    if ($09e991522ca7e64e$var$game.status === (0, $a5fd07fa01589658$export$eb2b832b8b9fda85) || $09e991522ca7e64e$var$game.status === (0, $a5fd07fa01589658$export$43a03cf66b318012)) $09e991522ca7e64e$var$hideMessage();\n    $09e991522ca7e64e$var$game.start();\n    $09e991522ca7e64e$var$hideMessage();\n    $09e991522ca7e64e$var$displayRecord();\n});\ndocument.addEventListener(\"keydown\", (e)=>{\n    switch(e.key){\n        case \"ArrowLeft\":\n            $09e991522ca7e64e$var$game.moveLeft();\n            break;\n        case \"ArrowRight\":\n            $09e991522ca7e64e$var$game.moveRight();\n            break;\n        case \"ArrowUp\":\n            $09e991522ca7e64e$var$game.moveUp();\n            break;\n        case \"ArrowDown\":\n            $09e991522ca7e64e$var$game.moveDown();\n            break;\n    }\n});\n\n\n//# sourceMappingURL=index.edb5a6b7.js.map\n","'use strict';\n\nimport { WIN, LOSE, Game } from '../modules/Game.class';\n\nconst game = new Game(null, showWinMessage, showLoseMessage);\n\nconst startButton = document.querySelector('.start');\nconst cells = document.querySelectorAll('.field-cell');\nconst score = document.querySelector('.game-score');\nconst recordElement = document.querySelector('.best__score');\nconst messageContainer = document.querySelector('.message-container');\n\nfunction showWinMessage() {\n  messageContainer.classList.remove('hidden');\n  messageContainer.classList.add('message-win');\n  messageContainer.textContent = 'You Win!';\n}\n\nfunction showLoseMessage() {\n  messageContainer.classList.remove('hidden');\n  messageContainer.classList.add('message-lose');\n  messageContainer.textContent = 'You Lose!';\n}\n\nfunction hideMessage() {\n  messageContainer.classList.add('hidden');\n}\n\nfunction updateScore(value) {\n  score.textContent = value;\n}\n\nfunction saveScore(sscore) {\n  const currentRecord = localStorage.getItem('highScore');\n\n  if (!currentRecord || sscore > currentRecord) {\n    localStorage.setItem('highScore', sscore);\n    displayRecord();\n  }\n}\n\nfunction displayRecord() {\n  const highScore = localStorage.getItem('highScore') || 0;\n\n  recordElement.textContent = highScore;\n}\n\ndisplayRecord();\n\ngame.getScore = function (moved, value) {\n  if (moved && value > 0) {\n    this.score += value;\n    updateScore(this.score);\n    saveScore(this.score);\n  }\n};\n\nstartButton.addEventListener('click', () => {\n  startButton.textContent = 'Restart';\n  startButton.classList.remove('start');\n  startButton.classList.add('restart');\n  score.textContent = '0';\n\n  cells.forEach((cell) => {\n    cell.classList.remove('hidden');\n  });\n\n  if (game.status === WIN || game.status === LOSE) {\n    hideMessage();\n  }\n\n  game.start();\n  hideMessage();\n  displayRecord();\n});\n\ndocument.addEventListener('keydown', (e) => {\n  switch (e.key) {\n    case 'ArrowLeft':\n      game.moveLeft();\n      break;\n    case 'ArrowRight':\n      game.moveRight();\n      break;\n    case 'ArrowUp':\n      game.moveUp();\n      break;\n    case 'ArrowDown':\n      game.moveDown();\n      break;\n  }\n});\n","'use strict';\n\nconst IDLE = 'idle';\nconst PLAYING = 'playing';\n\nexport const WIN = 'win';\nexport const LOSE = 'lose';\n\nexport class Game {\n  constructor(initialState, winCallback, loseCallback) {\n    this.board = initialState || [\n      [0, 0, 0, 0],\n      [0, 0, 0, 0],\n      [0, 0, 0, 0],\n      [0, 0, 0, 0],\n    ];\n\n    this.score = 0;\n\n    this.status = IDLE;\n    this.isStarted = false;\n    this.winCallback = winCallback;\n    this.loseCallback = loseCallback;\n  }\n\n  moveTile(fromCell, toCell) {\n    const fromCellRect = fromCell.getBoundingClientRect();\n    const toCellRect = toCell.getBoundingClientRect();\n\n    const xOffset = toCellRect.left - fromCellRect.left;\n    const yOffset = toCellRect.top - fromCellRect.top;\n\n    fromCell.style.setProperty('--x-offset', `${xOffset}px`);\n    fromCell.style.setProperty('--y-offset', `${yOffset}px`);\n\n    fromCell.classList.add('moving');\n  }\n\n  updateBoard() {\n    const cells = document.querySelectorAll('.field-cell');\n\n    let cellIndex = 0;\n\n    for (let row = 0; row < this.board.length; row++) {\n      for (let col = 0; col < this.board[row].length; col++) {\n        const cell = cells[cellIndex++];\n        const value = this.board[row][col];\n        const previousValue = cell.textContent;\n\n        cell.classList.remove(`field-cell--${previousValue}`);\n\n        if (value === 0) {\n          cell.textContent = '';\n        } else {\n          cell.classList.add(`field-cell--${value}`);\n          cell.textContent = value;\n        }\n      }\n    }\n  }\n\n  addRandomTile() {\n    const emptyCells = [];\n\n    for (let row = 0; row < 4; row++) {\n      for (let col = 0; col < 4; col++) {\n        if (this.board[row][col] === 0) {\n          emptyCells.push({ row, col });\n        }\n      }\n    }\n\n    if (emptyCells.length > 0) {\n      const { row, col } =\n        emptyCells[Math.floor(Math.random() * emptyCells.length)];\n\n      if (this.score === 0) {\n        this.board[row][col] = 2;\n      }\n      this.updateBoard();\n    }\n  }\n\n  addRandomCellAfterMoving() {\n    const emptyCells = [];\n\n    for (let row = 0; row < 4; row++) {\n      for (let col = 0; col < 4; col++) {\n        if (this.board[row][col] === 0) {\n          emptyCells.push({ row, col });\n        }\n      }\n    }\n\n    if (emptyCells.length > 0) {\n      const { row, col } =\n        emptyCells[Math.floor(Math.random() * emptyCells.length)];\n\n      this.board[row][col] = Math.random() < 0.9 ? 2 : 4;\n      this.updateBoard();\n    }\n  }\n\n  createColumn(col) {\n    const newColumn = [];\n\n    for (let row = 0; row < this.board.length; row++) {\n      if (this.board[row][col] !== 0) {\n        newColumn.push(this.board[row][col]);\n      }\n    }\n\n    return newColumn;\n  }\n\n  updateColumn(col, newColumn) {\n    let moved = false;\n\n    for (let row = 0; row < this.board.length; row++) {\n      if (this.board[row][col] !== newColumn[row]) {\n        this.board[row][col] = newColumn[row];\n        moved = true;\n      }\n    }\n\n    return moved;\n  }\n\n  resetGameStart() {\n    this.score = 0;\n    this.status = PLAYING;\n\n    this.board = [\n      [0, 0, 0, 0],\n      [0, 0, 0, 0],\n      [0, 0, 0, 0],\n      [0, 0, 0, 0],\n    ];\n\n    this.addRandomTile();\n    this.addRandomTile();\n  }\n\n  mergeTitles(newRow, canMerge) {\n    const mergedThisMove = [];\n\n    for (let i = 0; i < newRow.length - 1; i++) {\n      if (newRow[i] === newRow[i + 1]) {\n        newRow[i] *= 2;\n        newRow.splice(i + 1, 1);\n        canMerge[i] = false;\n        mergedThisMove.push(i);\n      }\n    }\n\n    return mergedThisMove;\n  }\n\n  moveLeft() {\n    let moved = false;\n\n    for (let row = 0; row < this.board.length; row++) {\n      const currentRow = this.board[row].filter((val) => val !== 0);\n      const mergedRow = [];\n\n      let skip = false;\n\n      for (let i = 0; i < currentRow.length; i++) {\n        if (skip) {\n          skip = false;\n          continue;\n        }\n\n        if (currentRow[i] === currentRow[i + 1]) {\n          mergedRow.push(currentRow[i] * 2);\n          this.getScore(true, currentRow[i] * 2);\n          skip = true;\n          moved = true;\n        } else {\n          mergedRow.push(currentRow[i]);\n        }\n      }\n\n      while (mergedRow.length < this.board[row].length) {\n        mergedRow.push(0);\n      }\n\n      if (!moved) {\n        for (let i = 0; i < this.board[row].length; i++) {\n          if (this.board[row][i] !== mergedRow[i]) {\n            moved = true;\n            break;\n          }\n        }\n      }\n\n      this.board[row] = mergedRow;\n    }\n\n    if (moved) {\n      this.addRandomCellAfterMoving();\n      this.updateBoard();\n      this.getStatus();\n    }\n\n    return moved;\n  }\n\n  moveRight() {\n    let moved = false;\n\n    for (let row = 0; row < this.board.length; row++) {\n      const currentRow = this.board[row].filter((val) => val !== 0);\n\n      const mergedRow = [];\n      let skip = false;\n\n      for (let i = 0; i < currentRow.length; i++) {\n        if (skip) {\n          skip = false;\n          continue;\n        }\n\n        if (currentRow[i] === currentRow[i + 1]) {\n          mergedRow.push(currentRow[i] * 2);\n          this.getScore(true, currentRow[i] * 2);\n          skip = true;\n          moved = true;\n        } else {\n          mergedRow.push(currentRow[i]);\n        }\n      }\n\n      while (mergedRow.length < this.board[row].length) {\n        mergedRow.unshift(0);\n      }\n\n      for (let i = 0; i < this.board[row].length; i++) {\n        if (this.board[row][i] !== mergedRow[i]) {\n          moved = true;\n          break;\n        }\n      }\n\n      this.board[row] = mergedRow;\n    }\n\n    if (moved) {\n      this.addRandomCellAfterMoving();\n      this.updateBoard();\n      this.getStatus();\n    }\n\n    return moved;\n  }\n\n  moveUp() {\n    let moved = false;\n\n    for (let col = 0; col < this.board.length; col++) {\n      const newColumn = this.createColumn(col);\n      const canMerge = new Array(newColumn.length).fill(true);\n\n      for (let i = 0; i < newColumn.length - 1; i++) {\n        if (\n          newColumn[i] === newColumn[i + 1] &&\n          canMerge[i] &&\n          canMerge[i + 1]\n        ) {\n          newColumn[i] *= 2;\n          newColumn.splice(i + 1, 1);\n          moved = true;\n          canMerge[i] = false;\n          this.getScore(moved, newColumn[i]);\n        }\n      }\n\n      while (newColumn.length < this.board.length) {\n        newColumn.push(0);\n      }\n\n      moved = this.updateColumn(col, newColumn) || moved;\n    }\n\n    if (moved) {\n      this.addRandomCellAfterMoving();\n      this.updateBoard();\n      this.getStatus();\n    }\n\n    return moved;\n  }\n\n  moveDown() {\n    let moved = false;\n\n    for (let col = 0; col < this.board.length; col++) {\n      const newColumn = this.createColumn(col);\n      const canMerge = new Array(newColumn.length).fill(true);\n\n      for (let i = newColumn.length - 1; i > 0; i--) {\n        if (\n          newColumn[i] === newColumn[i - 1] &&\n          canMerge[i] &&\n          canMerge[i - 1]\n        ) {\n          newColumn[i] *= 2;\n          newColumn.splice(i - 1, 1);\n          moved = true;\n          canMerge[i] = false;\n          this.getScore(moved, newColumn[i]);\n        }\n      }\n\n      while (newColumn.length < this.board.length) {\n        newColumn.unshift(0);\n      }\n\n      moved = this.updateColumn(col, newColumn) || moved;\n    }\n\n    if (moved) {\n      this.addRandomCellAfterMoving();\n      this.updateBoard();\n      this.getStatus();\n    }\n\n    return moved;\n  }\n\n  /**\n   * @returns {number[][]}\n   */\n  getState() {\n    return this.board;\n  }\n\n  getStatus() {\n    if (this.score === 0) {\n      this.status = IDLE;\n    } else {\n      let hasEmptyCell = false;\n      let has2048Cell = false;\n      let canMove = false;\n\n      for (let row = 0; row < this.board.length; row++) {\n        for (let col = 0; col < this.board[row].length; col++) {\n          if (this.board[row][col] === 0) {\n            hasEmptyCell = true;\n          }\n\n          if (this.board[row][col] === 2048) {\n            has2048Cell = true;\n          }\n\n          if (\n            row < this.board.length - 1 &&\n            this.board[row][col] === this.board[row + 1][col]\n          ) {\n            canMove = true;\n          }\n\n          if (\n            col < this.board[row].length - 1 &&\n            this.board[row][col] === this.board[row][col + 1]\n          ) {\n            canMove = true;\n          }\n        }\n      }\n\n      if (has2048Cell) {\n        this.status = WIN;\n        this.winCallback();\n      } else if (hasEmptyCell || canMove) {\n        this.status = PLAYING;\n      } else {\n        this.status = LOSE;\n        this.loseCallback();\n      }\n    }\n\n    return this.status;\n  }\n\n  start() {\n    this.resetGameStart();\n  }\n\n  restart() {\n    this.resetGameStart();\n  }\n}\n"],"names":["$a5fd07fa01589658$var$IDLE","$a5fd07fa01589658$var$PLAYING","$a5fd07fa01589658$export$43a03cf66b318012","$09e991522ca7e64e$var$game","constructor","initialState","winCallback","loseCallback","board","score","status","isStarted","moveTile","fromCell","toCell","fromCellRect","getBoundingClientRect","toCellRect","xOffset","left","yOffset","top","style","setProperty","classList","add","updateBoard","cells","document","querySelectorAll","cellIndex","row","length","col","cell","value","previousValue","textContent","remove","addRandomTile","emptyCells","push","Math","floor","random","addRandomCellAfterMoving","createColumn","newColumn","updateColumn","moved","resetGameStart","mergeTitles","newRow","canMerge","mergedThisMove","i","splice","moveLeft","currentRow","filter","val","mergedRow","skip","getScore","getStatus","moveRight","unshift","moveUp","Array","fill","moveDown","getState","hasEmptyCell","has2048Cell","canMove","start","restart","$09e991522ca7e64e$var$messageContainer","$09e991522ca7e64e$var$startButton","querySelector","$09e991522ca7e64e$var$cells","$09e991522ca7e64e$var$score","$09e991522ca7e64e$var$recordElement","$09e991522ca7e64e$var$hideMessage","$09e991522ca7e64e$var$displayRecord","highScore","localStorage","getItem","$09e991522ca7e64e$var$saveScore","sscore","currentRecord","setItem","addEventListener","forEach","e","key"],"version":3,"file":"index.edb5a6b7.js.map"}